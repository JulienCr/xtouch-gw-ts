midi:
  input_port: "UM-One"
  output_port: "UM-One"
  apps: 
    - name: "qlc"
      output_port: "qlc-in"
      input_port: "qlc-out"
    - name: "voicemeeter"
      output_port: "xtouch-gw"
      input_port: "xtouch-gw-feedback"

xtouch:
  mode: "mcu"  # "mcu" (par défaut) ou "ctrl"
  overlay_per_app:
    qlc:
      mode: "8bit"
    voicemeeter:
      mode: "percent"

obs:
  host: "127.0.0.1"
  port: 4455
  password: "aaaaaa"

paging:
  channel: 1
  prev_note: 46
  next_note: 47

# Entrée manette (HID)
gamepad:
  enabled: true
  provider: hid
  analog:
    pan_gain: 15
    zoom_gain: 1.5
    deadzone: 0.02
    gamma: 1.5
  hid:
    product_match: "Faceoff Wired Pro Controller"
    mapping_csv: ./docs/gamepad-hid-mapping.csv

pages_global:
  controls:
    vpot6_rotate: { app: "obs", action: "nudgeX", params: ["--- CAM Main 2", "--- CAM Main", 1] }
    vpot7_rotate: { app: "obs", action: "nudgeY", params: ["--- CAM Main 2", "--- CAM Main", 1] }
    vpot8_rotate: { app: "obs", action: "scaleUniform", params: ["--- CAM Main 2", "--- CAM Main", 0.02] }

    # Gamepad: mêmes actions que les 3 VPOTs (test boutons)
    gamepad.axis.lx: { app: "obs", action: "nudgeX", params: ["--- CAM Main 2", "--- CAM Main", 1] }
    gamepad.axis.ly: { app: "obs", action: "nudgeY", params: ["--- CAM Main 2", "--- CAM Main", 1] }
    gamepad.axis.ry: 
      app: "obs"
      action: "scaleUniform"
      params: ["--- CAM Main 2", "--- CAM Main", 0.01]

    gamepad.btn.a:
      app: "obs"
      action: "changeScene"
      params: ["--- CAM Main 2"]

    gamepad.btn.b:
      app: "obs"
      action: "changeScene"
      params: ["--- CAM Main"]

    gamepad.btn.x:
      app: "obs"
      action: "changeScene"
      params: ["--- CAM Jardin"]

    gamepad.btn.y:
      app: "obs"
      action: "changeScene"
      params: ["--- CAM Cour"]

    fader_master:
      app: "qlc"
      midi: { type: "cc", channel: 1, cc: 78 }

    assign_track:
      app: "obs"
      action: "changeScene"
      params: ["--- CAM Main"]
      indicator: { signal: "obs.selectedScene", equals: "--- CAM Main" }

    assign_pan:
      app: "obs"
      action: "changeScene"
      params: ["--- CAM Main 2"]
      indicator: { signal: "obs.selectedScene", equals: "--- CAM Main 2" }

    assign_eq:
      app: "obs"
      action: "changeScene"
      params: ["--- CAM Jardin"]
      indicator: { signal: "obs.selectedScene", equals: "--- CAM Jardin" }

    assign_send:
      app: "obs"
      action: "changeScene"
      params: ["--- CAM Cour"]
      indicator: { signal: "obs.selectedScene", equals: "--- CAM Cour" }

    assign_plugin:
      app: "obs"
      action: "changeScene"
      params: ["--- Blur"]
      indicator: { signal: "obs.selectedScene", equals: "--- Blur" }

    global_view:
      app: "obs"
      action: "toggleStudioMode"
      indicator: { signal: "obs.studioMode", truthy: true }

    play:
      app: "obs"
      action: "TriggerStudioModeTransition"
      indicator: { signal: "obs.studioMode", truthy: true }

    flip:
      app: "qlc"
      midi: { type: "cc", channel: 1, cc: 18 }

    rewind:
      app: "qlc"
      midi: { type: "cc", channel: 1, cc: 17 }

    marker:
      app: "qlc"
      midi: { type: "cc", channel: 1, cc: 10 }

    nudge:
      app: "qlc"
      midi: { type: "cc", channel: 1, cc: 11 }

    cycle:
      app: "qlc"
      midi: { type: "cc", channel: 1, cc: 12 }

pages:
  - name: "Voicemeeter+QLC"
    lcd:
      labels:
        - "Mic\nBaba"
        - "Mic\nMath"
        - "Mic\nJu"
        - "Son\nMac"
        - "Son\nPC"
        - "Son\nMASTER"
        - "Son\nRetours"
        - "Lum\nFace"
      colors: [1,1,1,4,4,7,5,3]
    controls:
      fader1:
        app: "voicemeeter"
        midi: {type: "passthrough"}
      fader2:
        app: "voicemeeter"
        midi: {type: "passthrough"}
      fader3:
        app: "voicemeeter"
        midi: {type: "passthrough"}
      fader4:
        app: "voicemeeter"
        midi: {type: "passthrough"}
      fader5:
        app: "voicemeeter"
        midi: {type: "passthrough"}
      fader6:
        app: "voicemeeter"
        midi: {type: "passthrough"}
      fader7:
        app: "voicemeeter"
        midi: {type: "passthrough"}
      fader8:
        app: "qlc "
        midi: {type: "cc", channel: 1, cc: 77}
        overlay:
          mode: "8bit"
      mute1:
        app: "voicemeeter"
        midi: {type: "passthrough"}
      mute2:
        app: "voicemeeter"
        midi: {type: "passthrough"}
      mute3:
        app: "voicemeeter"
        midi: {type: "passthrough"}
  
  - name: "Lighting"
    lcd:
      labels:
        - "Neons\nJardin"
        - "Neons\nCours"
        - "Contres\nJardin"
        - "Contres\nCour"
        - "Wash\nCanapé"
        - "Wash\nÉtagère"
        - ""
        - ""
        - "Face"
      colors: [6,6,5,0,2,2,0,3]
    controls:
      fader1:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 0 }
      fader2:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 1 }
      fader3:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 19 }
      # fader4:
      #   app: "qlc"
      #   midi: { type: "cc", channel: 1, cc: 85 }
      fader5:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 4 }
      fader6:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 5 }
      fader8:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 77 }

      # Boutons couleur Frame 1 (Néons Latéraux)
      rec1:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 41 } # blanc
      solo1:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 47 } # cyan
      mute1:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 45 } # rouge
      select1:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 44 } # rose

      rec2:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 60 } # blanc
      solo2:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 62 } # cyan 
      mute2:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 65 } # rouge
      select2:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 64 } # rose

      rec3:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 31 }  # cyan
      solo3:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 26 } # bleu
      mute3:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 29 } # rouge
      select3:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 28 } # rose
      
      # rec4:
      #   app: "qlc"
      #   midi: { type: "cc", channel: 1, cc: 31 }  # cyan
      # solo4:
      #   app: "qlc"
      #   midi: { type: "cc", channel: 1, cc: 26 } # cyan
      # mute4:
      #   app: "qlc"
      #   midi: { type: "cc", channel: 1, cc: 29 } # rouge
      # select4:
      #   app: "qlc"
      #   midi: { type: "cc", channel: 1, cc: 28 } # rose

  - name: "Lat Cours"
    lcd:
      labels:
        - "Lat Cours\nDimmer"
        - "Lat Cours\nRouge"
        - "Lat Cours\nVert"
        - "Lat Cours\nBleu"
        - "Lat Cours\nAmbre"
        - "Lat Cours\nBlanc"
        - ""
        - "Face"
      colors: [7,1,2,4,3,7,0,3]
    controls:
      fader1:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 85 }
      fader2:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 86 }
      fader3:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 87 }
      fader4:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 88 }
      fader5:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 89 }
      fader6:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 90 }
      fader8:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 77 }

  - name: "Lat Jardin"
    lcd:
      labels:
        - "Lat Jardin\nDimmer"
        - "Lat Jardin\nRouge"
        - "Lat Jardin\nVert"
        - "Lat Jardin\nBleu"
        - ""
        - ""
        - ""
        - "Face"
      colors: [7,1,2,4,0,0,0,3]
    controls:
      fader1:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 49 }
      fader2:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 50 }
      fader3:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 51 }
      fader4:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 52 }
      fader5:
        app: "qlc"
      fader8:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 77 }


  - name: "Lum contres"
    lcd:
      labels:
        - "Lat Jar\nDimmer"
        - "Lat Jar\nRouge"
        - "Lat Jar\nVert"
        - "Lat Jar\nBleu"
        - "Lat Cour\nDimmer"
        - "Lat Cour\nRouge"
        - "Lat Cour\nVert"
        - "Face"
      colors: [7,1,2,4,0,0,0,3]
    controls:
      fader1:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 81 }
      fader2:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 82 }
      fader3:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 83 }
      fader4:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 84 }
      # fader5:
      #   app: "qlc"
      #   midi: { type: "cc", channel: 1, cc: 85 }
      # fader6:
      #   app: "qlc"
      #   midi: { type: "cc", channel: 1, cc: 86 }
      # fader7:
      #   app: "qlc"
      #   midi: { type: "cc", channel: 1, cc: 87 }
      # fader8:
      #   app: "qlc"
      #   midi: { type: "cc", channel: 1, cc: 88 }
      fader8:
        app: "qlc"
        midi: { type: "cc", channel: 1, cc: 77 }
      
  #     # Boutons couleur Frame 3 (Lum Contres)
  #     mod_shift:      # Orange
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 40 }  # CC 40
  #     mod_option:     # Blanc
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 41 }  # CC 41
  #     auto_read_off:  # Bleu
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 42 }  # CC 42
  #     auto_write:     # Cyan
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 47 }  # CC 47
  #     mod_control:    # Jaune
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 43 }  # CC 43
  #     mod_cmd_alt:    # Roses
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 44 }  # CC 44
  #     auto_touch:     # Rouge
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 45 }  # CC 45
  #     auto_latch:     # Vert
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 70 }  # CC 46
  # - name: "Néons Latéraux RGB"
  #   lcd:
  #     labels:
  #       - "Jardin\nRouge"
  #       - "Jardin\nVert"
  #       - "Jardin\nBleu"
  #       - "Cours\nRouge"
  #       - "Cours\nVert"
  #       - "Cours\nBleu"
  #       - "-"
  #       - "-"
  #     colors: [1,2,4,1,2,4,0,0]
  #   controls:
  #     fader1:
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 90 }
  #     fader2:
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 91 }
  #     fader3:
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 92 }
  #     fader4:
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 93 }
  #     fader5:
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 94 }
  #     fader6:
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 95 }
      
  #     # Boutons couleur Frame 2 (Néons Latéraux)
  #     mod_shift:      # Orange
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 32 }  # CC 32
  #     mod_option:     # Blanc
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 33 }  # CC 33
  #     auto_read_off:  # Bleu
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 34 }  # CC 34
  #     auto_write:     # Cyan
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 39 }  # CC 39
  #     mod_control:    # Jaune
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 35 }  # CC 35
  #     mod_cmd_alt:    # Roses
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 36 }  # CC 36
  #     auto_touch:     # Rouge
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 37 }  # CC 37
  #     auto_latch:     # Vert
  #       app: "qlc"
  #       midi: { type: "cc", channel: 1, cc: 38 }  # CC 38
  # 
